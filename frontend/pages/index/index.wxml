<!--index.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input" bindtap="goToSearch">
      <image class="search-icon" src="/images/icons/search.png"></image>
      <text class="search-placeholder">搜索农产品</text>
    </view>
  </view>

  <!-- 轮播图 -->
  <view class="banner-section">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}">
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <image class="banner-image" src="{{item.image}}" mode="aspectFill" bindtap="onBannerTap" data-item="{{item}}"></image>
      </swiper-item>
    </swiper>
  </view>

  <!-- 分类导航 -->
  <view class="category-section">
    <view class="section-title">
      <text class="title-text">商品分类</text>
      <text class="more-text" bindtap="goToCategory">更多 ></text>
    </view>
    <view class="category-grid">
      <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="goToCategory" data-id="{{item.id}}">
        <image class="category-icon" src="/images/category/{{item.icon}}.png"></image>
        <text class="category-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- 热门商品 -->
  <view class="hot-section">
    <view class="section-title">
      <text class="title-text">热门推荐</text>
      <text class="more-text" bindtap="goToMore" data-type="hot">更多 ></text>
    </view>
    <view class="product-list">
      <view class="product-item" wx:for="{{hotProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <image class="product-image" src="{{item.images[0]}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <view class="product-price">
            <text class="current-price">¥{{item.price}}</text>
            <text class="original-price" wx:if="{{item.original_price > item.price}}">¥{{item.original_price}}</text>
          </view>
          <view class="product-meta">
            <text class="sales-count">已售{{item.sales_count}}</text>
            <text class="unit">{{item.unit}}</text>
          </view>
        </view>
        <view class="add-cart-btn" catchtap="addToCart" data-id="{{item.id}}">
          <image class="cart-icon" src="/images/icons/cart-add.png"></image>
        </view>
      </view>
    </view>
  </view>

  <!-- 推荐商品 -->
  <view class="recommend-section" wx:if="{{recommendProducts.length > 0}}">
    <view class="section-title">
      <text class="title-text">为你推荐</text>
      <text class="more-text" bindtap="goToMore" data-type="recommend">更多 ></text>
    </view>
    <view class="product-list">
      <view class="product-item" wx:for="{{recommendProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <image class="product-image" src="{{item.images[0]}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <view class="product-price">
            <text class="current-price">¥{{item.price}}</text>
            <text class="original-price" wx:if="{{item.original_price > item.price}}">¥{{item.original_price}}</text>
          </view>
          <view class="product-meta">
            <text class="sales-count">已售{{item.sales_count}}</text>
            <text class="unit">{{item.unit}}</text>
          </view>
        </view>
        <view class="add-cart-btn" catchtap="addToCart" data-id="{{item.id}}">
          <image class="cart-icon" src="/images/icons/cart-add.png"></image>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{hasMore}}">
    <text class="load-text" bindtap="loadMore">点击加载更多</text>
  </view>

  <!-- 回到顶部 -->
  <view class="back-to-top" wx:if="{{showBackToTop}}" bindtap="backToTop">
    <image class="top-icon" src="/images/icons/top.png"></image>
  </view>
</view>